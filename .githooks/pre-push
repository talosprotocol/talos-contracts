#!/usr/bin/env bash
set -euo pipefail

echo "ğŸš€ Running pre-push validation..."

if [ -d "typescript" ]; then
    echo "ğŸ”· TypeScript pre-push checks"
    cd typescript
    
    # Full validation before push
    npm run validate
    
    # Consumer smoke test
    echo "  â–¸ Running consumer smoke test..."
    npm run smoke:pack
    
    echo "âœ… TypeScript pre-push passed"
    cd ..
fi

if [ -d "python" ]; then
    echo "ğŸ Python pre-push checks"
    cd python
    pytest -v
    echo "âœ… Python pre-push passed"
    cd ..
fi

echo ""
echo "ğŸ‰ All pre-push checks passed!"
